<template name="listingResults">
	{{#if Template.subscriptionsReady}}
		{{#each listings}}
			{{> listing}}
		{{/each}}
	{{/if}}

	{{> listingModal}}
</template>

<template name="listing">

	<div class="listings-items-wrap"> 
		<div class="listings-item-scaffold col-md-6">
			
			<div class="listings-item"
				 style="background-image:url('/cfs/files/images/{{listImgId}}/{{imageName}}');">

				<article id="listingItem" 
				class="listings-item-preview"
				data-toggle="modal"
				data-target="#listingModal">
					<span class="col-md-12 lip-text-wrap">
						<p style="text-align:center;" class="col-md-4 info-pipe">
							<span style="font-weight:500;">&#36;</span> {{ price }}
						</p>

						<p style="text-align:center;" class="col-md-4 info-pipe">
							{{ milage }} <span style="font-weight:500;">mi</span>
						</p>

						<p style="text-align:center;" class="col-md-4 info-pipe">
							<span style="font-weight:500;">yr</span> {{ year }}
						</p>

						<p style="text-align:center;" class="col-md-12 peak">
							{{ make.name }}, {{ model.name }}<br>
							{{ address.formatted_address }}
						</p>
					</span>
				</article>	

			</div>

		</div>
	</div>
</template>

<template name="listingModal">

	<div class="modal modal-wide fade" id="listingModal">

		<div class="modal-dialog modal-lg">

			<!-- pause -->
			<button type="button" 
					id="closeModal"
					class="close z-index-8" 
					data-dismiss="modal" 
					aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>

			
			<div class="modal-content no-padding col-md-12">		
				<div class="modal-body no-padding">
				<!-- left -->

					<div class="col-md-6 image-container no-padding">
						<img src="/cfs/files/images/{{listingContent.listImgId}}/{{listingContent.imageName}}" 
							 class="img-responsive col-md-12 listing-images" 
							 alt="an image of the listing vehicle">
					</div>
								<!-- right -->
					<div class="col-md-6 listing-text-container">

						<span class="listing-window-comps">
							<div class="user-info-prop">

								<img src="{{listingOwner.profile.profilePicUrl}}" 
								class="img-responsive img-circle" 
								style="width:50px;height:50px;object-fit:cover;">

								<h3 style="font-weight: 500;">
									{{ listingOwner.profile.name }}
								</h3>
								
							</div>
							<div class="sudo-sep"></div>
							<div class="listing-further-info-prop">
								<p style="font-weight: 500;">Details:</p>
								<p>
									{{ listingContent.year }} 
									{{ listingContent.make.name }}, 
									{{ listingContent.model.name }}
								</p>
								<p>listed at {{ listingContent.price }}</p>
								<p>{{ listingContent.milage }} miles</p>
							</div>
							<div class="sudo-sep"></div>
							<div class="user-description-prop">
								<p style="font-weight: 500;">The lister's description:</p>
								<p>{{ listingContent.description }}</p>
							</div>
							<div class="sudo-sep"></div>
							<div class="user-contact-prop">
								<p style="font-weight: 500;">lister contact:</p>
								<!-- pending -->
								<p>{{ listingOwnerEmail }}</p>
								<p>{{ listingOwner.profile.phone }}</p>
							</div>
							<div class="sudo-sep"></div>

							<div class="listing-explore-cta-prop">
								<a id="viewListing" 
								class="btn btn-success" 
								href="/listing/{{listingContent._id}}">
									learn more
								</a>
							</div>				

						</span>

					</div>
				</div>
			</div>

		</div>
		
	</div>


</template>